# Python unittest

## Полезная информация
* Видео с примером: 
https://www.youtube.com/watch?v=YD7aYJh3k-w
* Краткое руководство и рекомендации (может потребоваться VPN): 
https://ru.hexlet.io/courses/advanced_python/lessons/python_testing_unittest/theory_unit
* https://tirinox.ru/unit-test-python/
* https://www.youtube.com/watch?v=Rz4S0v7K7Ho

## Написание тестов
* Тесты для одного класса/модуля должны располагаться в отдельном файле.
* Для каждой функции/метода создать класс, унаследовав его от ***unittest.TestCase.*** Назвать этот класс в стиле ***НазваниеФункцииTest***.
* Внутри класса НазваниеФункцииTest определить методы-тесты для каждого тестового случая. Название метода должно начинаться с test_.
* Каждый тест снабдить комментарием, в котором описан тип теста (позитивный или негативный), входные данные, ожидаемое поведение (какие данные будут в результате / какую ошибку выбросит (если тест негативный)).

## Требования к тесту
* Каждый тест должен использовать свой собственный набор входных данных.
* Результат выполнения одного теста не должен зависеть от других тестов.
* Тест должен падать при неправильном поведении тестируемой функции
* Тесты должны покрывать все ветки условий в теле функции и исключения, которые она может выбросить.

## [Пример - программа "Калькулятор"](https://github.com/Ceowyllian/Calculator)
Написать программу «Калькулятор», которая может выполнять 4 операции над числами a и b: 
* сложение (+)
* вычитание (-)
* умножение (\*)
* деление (/). 

Результат каждой операции вычисляет отдельная функция.

* Для (+), (-), (\*) результат будет целым или вещественным числом, в зависимости от типов аргументов. 
* Операция (/) всегда должна возвращать вещественный результат. 

Что нужно протестировать:
* Тип данных операндов – должен быть int или float. Функция должна бросать исключение, если тип неправильный.
```python
def test_invalid_type_left(self):
    """
    Негативный тест - недопустимый тип данных левого операнда. \n
    Вызовет исключение TypeError.
    """

    with self.assertRaises(TypeError) as err:
        main.validate_type('aaa', 4)
    error_msg = 'Недопустимый тип аргумента!'
    self.assertEqual(error_msg, err.exception.args[0])
```
```python
def test_invalid_type_right(self):
    """
    Негативный тест - недопустимый тип данных правого операнда. \n
    Вызовет исключение TypeError.
    """

    with self.assertRaises(TypeError) as err:
        main.validate_type(4, 'aaa')
    error_msg = 'Недопустимый тип аргумента!'
    self.assertEqual(error_msg, err.exception.args[0])
```
* Тип возвращаемого значения – должен быть int или float для ***(+), (-), (\*)*** (в зависимости от типов операндов) и float для деления.
* Для операции деления правый операнд не может быть нулевым. Проверить, что функция деления выбросит ZeroDivisionError при попытке поделить на ноль.
```python
def test_division_by_zero(self):
    """
    Негативный тест - правый операнд равен нулю. \n
    Вызовет исключение ZeroDivisionError.
    """

    a = 5
    b = 0
    with self.assertRaises(ZeroDivisionError) as err:
        main.divide(a, b)
    error_msg = 'На ноль делить нельзя!'
    self.assertEqual(error_msg, err.exception.args[0])
```

•	Позитивные тесты – функции должны выполнять именно те операции, которые описаны в задании. Сравнить результат, возвращаемый функцией и результат арифметической операции.
```python
def test_both_args_are_int(self):
    """
    Позитивный тест - операнды типа int. \n
    Результат имеет тип int.
    """

    a = 4
    b = 2
    result = main.minus(a, b)
    self.assertIsInstance(result, int)
    self.assertEqual(a - b, result)
```
```python
def test_both_args_are_float(self):
    """
    Позитивный тест - операнды типа float. \n
    Результат имеет тип float.
    """

    a = 4.6
    b = 3.1
    result = main.minus(a, b)
    self.assertIsInstance(result, float)
    self.assertEqual(a - b, result)
```
