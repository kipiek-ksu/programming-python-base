# Залікова робота з програмування
## Інженерія програмного забезпечення
### 1 курс

#### Покриті теми:
- Запити до веб-ресурсів
- Робота з файлами
- Обробка структурованих даних 

#### Критерії оцінювання
- Слідування порад і вимог до оформлення коду (відступи, назви функцій, зминних тощо)
- Форматування коментарів
- Коректність виконання програми на всіх допустимих вхідних даних
- Повнота виконання завдань
- Адекватна структура коду і розбиття на підпрограми
- Використання тайпінгу де доречно

#### Опис задачі та методичні вказівки
За посиланням [https://registry.edbo.gov.ua/opendata/universities/](https://registry.edbo.gov.ua/files/regions.xlsx) розміщено `РЕЄСТР СУБ'ЄКТІВ ОСВІТНЬОЇ ДІЯЛЬНОСТІ (ЗАКЛАДИ ВИЩОЇ, ФАХОВОЇ ПЕРЕДВИЩОЇ ТА ПРОФЕСІЙНОЇ (ПРОФЕСІЙНО-ТЕХНІЧНОЇ) ОСВІТИ)`

На сторінці описано `МЕТОДИ API` для доступу до відкритої частини реєстру

```
GET /api/universities/
ut тип закладу освіти
1 – Заклади вищої освіти
2 – Заклади професійної (професійно-технічної) освіти
9 – Заклади фахової передвищої освіти
lc код регіону
exp тип експорту (xlsx, xml, json)
Приклад: /api/universities/?ut=1&lc=80&exp=xlsx
```

Коди регіонів доступні за посиланням [https://registry.edbo.gov.ua/files/regions.xlsx](https://registry.edbo.gov.ua/files/regions.xlsx)

Відправивши HTTP GET запит за вказаним у зразку посиланням можна отримати інформацію всі або частину закладів освіти певного типу

Для надсилання HTTP запитів слід використовувати методи стандартної бібліотеки `requests`; для GET запиту - відповідно метод `.get()`

Методи повертають об'єкт типу `Response`. В рамках роботи слід отримати тіло запиту у форматі JSON, використавши метод `.json()` 

##### Приклад: 

```python
import requests
r = requests.get('https://registry.edbo.gov.ua/api/universities/?ut=1&lc=80&exp=json')
universities: list = r.json()
```

Метод `.json()` повертає максимально наближену до відповідного JSON структуру в мові python

В рамках роботи це буде списком словників

Кожен з них матиме ідентичний набір ключів, а значеннями виступатимуть строки

Деякі з полів можуть бути пустими! (`None`)

Для обробки даних можна використовувати як і обхід в циклах, так і спрощені конструкції - `list comprehension` та `dict comprehension` 

##### Приклад:

Отримання певної частини полів даних (тільки `university_id` та `post_index`) з використанням `list comprehension` та `dict comprehension` 

```python
data_headers = [
    'university_id', 
    'post_index',
]

filtered_data = [
    {
        k: row[k] for k in data_headers  # dict comprehension
    } for row in universities  # list comprehension
]
```

Для запису даних у файл в слід використовувати формат `csv`; для цього призначена бібліотека `csv`

В рамках роботи достатньо використання класу `csv.DictWriter` і методів `.writeheader()` та `.writerows()`

Назви колонок слід зберігати як вказано у відповіді серверу, `university_name` тощо

##### Приклад:

```python
import csv  # імпорт бібліотеки для роботи з csv файлами
data = [
    {'column1': 'foo', 'column2': 'bar'},
    {'column1': 'bar', 'column2': 'baz'},
]  # дані що будуть записані в файл 

# відкриття файлу TEST.csv в режимі запису у форматі UTF-8 (буде використовуватись як змінна f)
with open('TEST.csv', mode='w', encoding='UTF-8') as f:
    
    # створення об'єкту DictWriter, що писатиме в файл f дані під вказаними заголовками
    writer = csv.DictWriter(f, fieldnames=['column1', 'column2'])
    
    # команда на запис заголовків
    writer.writeheader()
    
    # команда на запис даних
    writer.writerows(data)
```

##### Мінімально повноцінний приклад:

Отримання ЗВО з 80 регіону і збереження таблиці з їх ідентифікаторів і поштових індексів

```python
import requests
import csv

r = requests.get('https://registry.edbo.gov.ua/api/universities/?ut=1&lc=80&exp=json')

universities: list = r.json()
filtered_data = [{k: row[k] for k in ['university_id', 'post_index']} for row in universities]

with open('TEST.csv', mode='w', encoding='UTF-8') as f:
    writer = csv.DictWriter(f, fieldnames=filtered_data[0].keys())
    writer.writeheader()
    writer.writerows(filtered_data)
```

#### Завдання

##### Для всіх

1. Запитати у користувача код регіону
2. Отримати ЗВО з вказаного користувачем регіону
3. Зберегти всі дані у файл `universities.csv` у форматі `csv`
4. Збережіть ті ж дані у файл  `universities_<код регіону>.csv`, наприклад `universities_80.csv`
5. Якщо регіон не зі списку доступних, то повідомити про це користувачеві у консолі

##### По варіантах - завдання #1

Відфільтруйте і збережіть таку інформацію про заклади...

1. Назви та ПІП керівників в файл `rectors.csv`
2. Назви та адреси в файл `address.csv`
3. Назви, адреси та поштові індекси в файл `address_index.csv`
4. Назви та EDRPOU в файл `EDRPOU.csv`
5. Назви та контактні дані (телефон, email) в файл `contacts.csv`
6. Назви та вебсайти в файл `websites.csv`
7. Назви та англійські назви в файл `ua_en.csv`

##### По варіантах - завдання #2

Ускладніть програму з першого завдання наступним фільтром...

1. З формою фінансування `Державна`
2. З посадою керівника `Ректор`
3. З роком заснування між 1950 та 1999

##### Завдання 3

Ускладніть програму з другого завдання можливістю фільтрування за будь-яким з наявних значень поля

Підказка - сформуйте список всіх значень що зустрічають і дайте користувачеві обрати 
